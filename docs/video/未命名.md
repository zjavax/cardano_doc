[博客](https://iohk.io/en/blog/posts/page-1/)> [2025](https://iohk.io/en/blog/posts/2025/page-1/) >[四月](https://iohk.io/en/blog/posts/2025/04/page-1/)> Ouroboros Peras：加速 Cardano 上的交易结算

[

# Ouroboros Peras：加速 Cardano 上的交易结算

](https://iohk.io/en/blog/posts/2025/04/11/ouroboros-peras-accelerating-transaction-settlement-on-cardano/)

### 了解 Peras 如何加速 Cardano 上的交易结算、减少等待时间、最大限度地降低回滚风险并增强互操作性

 2025 年 4 月 11 日 [Emmanuel Ameh](https://iohk.io/en/blog/authors/emmanuel-ameh/page-1/) 阅读时长： 4 分钟

![Ouroboros Peras：加速 Cardano 上的交易结算](https://ucarecdn.com/3edb37cb-f54d-4a59-b210-508c85504afb/-/resize/800/)

目前正在开发的[Ouroboros Peras](https://www.youtube.com/watch?v=HRJzwoArqg4)（以下简称_Peras ）是_[Ouroboros Praos](https://iohk.io/en/research/library/papers/ouroboros-praos-an-adaptively-secure-semi-synchronous-proof-of-stake-protocol/)共识协议的高级升级，旨在加速交易结算，同时保持 Cardano 区块链的安全性和弹性。通过引入新的投票机制，Peras 将确保交易结算速度显著加快，从而减少用户的等待时间并降低回滚风险。

## 为什么我们需要更快的结算？

在许多区块链系统中，用户必须等待多个区块的添加才能将其交易视为最终确认。这个过程可能需要很长时间，这对于依赖快速确认的日常交易或去中心化应用程序 (DApp) 来说并不理想。Peras 通过以下方式解决了这个问题：

- **提升用户体验。**更短的结算时间使 Cardano 对时间敏感的 DApp 响应更快、效率更高。
- **增强安全性。**一旦某个区块被_提升_（认证），涉及该区块的链回滚的可能性就会大大降低。
- **支持桥接和合作伙伴链。**更快的结算简化了 Cardano 主链和合作伙伴链之间的转账，提高了互操作性。
- **减少交易所的确认要求。**更快的区块结算可以让中心化交易所 (CEX) 用户更快地获得资金。
- **启用新的用例。**更快的结算速度为去中心化和中心化服务创造了机会，使快速交易结算受益。

## Peras 如何工作？

Peras 引入了一种新的投票流程，使权益池运营商 (SPO) 能够按指定的时间间隔对区块进行认证。经过认证的区块将具有额外的权重，从而增加其被纳入最重链的可能性。这种方法显著加快了交易结算速度，同时保持了区块链的安全性和去中心化。以下是其工作原理的简要说明：

1. **投票委员会。**随机选择的一组 SPO 参与预定的投票轮次。
2. **投票流程。**每个委员会成员对距离链顶端一定深度的区块进行投票。这些投票的权重取决于每个 SPO 控制的权益。
3. **已认证区块。**收集到足够投票的区块将达到已认证状态。
4. **权重提升。**经过认证的区块将获得额外的权重，从而影响网络偏好哪些区块。
5. **最重链规则。Peras**不使用最长链规则，而是依赖于链的权重。已认证区块对链的选择有更大的影响。
6. **更快的结算。**通过对区块施加额外的权重，网络可以更快地完成区块结算，从而减少不可逆交易的等待时间。

_请注意，一个更扩展的 Peras 设计（仍在考虑中）可以包含类似 BFT 的预投票步骤，确保委员会最终集中在一个区块上进行提升。如果没有区块获得认证，则会触发“冷却期”，之后再尝试再次验证。然而，核心区块生成流程（基于抽签）与 Praos 保持一致。_

## Peras 的好处

Peras 专注于快速解决，同时保留[Ouroboros 协议](https://docs.cardano.org/about-cardano/learn/ouroboros-overview)系列所著称的安全性和去中心化。

_请注意，在实践中，Peras 被视为 Praos 的下一个进化步骤，而非旧协议的直接替代方案。它的用例主要与快速结算相关，而其他协议则解决一些正交问题（例如隐私、时间同步或吞吐量）。_

### 对于普通用户

- **更快的交易确认。Peras**缩短了结算时间，为 DApp 带来更灵敏的体验。
- **降低回滚风险。**更快的结算速度降低了区块链重组的可能性，从而避免了最近的区块失效。
- **提升用户体验。**更快的结算速度提升了 Cardano 对日常 DApp 和服务的吸引力。
- **启用新的智能合约用例。**虽然 Peras 不会影响智能合约的执行，但更快的结算速度可以为时间敏感的智能合约应用打开大门。

### 对于权益池运营商

- **提升影响力和参与度。SPO**在每一轮中积极投票，增强了网络的安全性，同时潜在地提高了奖励分配的准确性。
- **最低运营成本。**新的投票机制仅需适度增加带宽。
- **增强网络稳定性。Peras**的自我修复功能可帮助网络快速从中断中恢复。

通过引入利益相关者驱动的投票机制，Peras 在保持去中心化的同时，简化了 Cardano 上的交易结算。Cardano 共识设计的这一改进为用户提供了更快、更安全的交易，并赋予 SPO 权力，帮助维持区块链的弹性和完整性。

_Peras 目前正在开发中。如需了解更多信息和最新进展，请访问以下链接：_

- [_Ouroboros Peras – 更快的结算_](https://github.com/cardano-foundation/CIPs/blob/master/CIP-0140/README.md) _CIP_
- [_正式规范_](https://peras.cardano-scaling.org/agda_html/Peras.SmallStep.html)
- [_Peras 研究与开发网站_](https://peras.cardano-scaling.org/)
- [_交互式模拟器_](https://peras-simulation.cardano-scaling.org/index.html)
- [_概率计算器_](https://peras.cardano-scaling.org/dashboard/index.html)
- [_GitHub 存储库_](https://github.com/input-output-hk/peras-design)
- [](https://www.youtube.com/watch?v=HRJzwoArqg4)_Ouroboros Peras：Cardano 协议视频_[_之旅的下一步_](https://www.youtube.com/watch?v=HRJzwoArqg4)。



第二篇文章: 

[博客](https://iohk.io/en/blog/posts/page-1/)> [2024](https://iohk.io/en/blog/posts/2024/page-1/) >[十月](https://iohk.io/en/blog/posts/2024/10/page-1/)> Ouroboros Peras：卡尔达诺协议旅程的下一步

[

# Ouroboros Peras：Cardano 协议旅程的下一步

](https://iohk.io/en/blog/posts/2024/10/14/ouroboros-peras-the-next-step-in-the-journey-of-cardano-s-protocol-1/)

 2024 年 10 月 14 日 [Fernando Sanchez](https://iohk.io/en/blog/authors/fernando-sanchez/page-1/) 阅读时长12 分钟

![Ouroboros Peras：Cardano 协议旅程的下一步](https://ucarecdn.com/ba3e9f94-8c37-4dc4-8df5-e36e9f3909f9/-/resize/800/)

[Ouroboros Peras（以下简称 Peras）是Ouroboros Praos 协议](https://eprint.iacr.org/2017/573.pdf)的扩展，旨在解决交易结算时限问题，即交易被撤销的可能性变得微乎其微的时间点。更短的结算时间可以提高区块链系统的安全性、可用性和效率。

Peras 背后的关键概念是使用基于权益的投票来提高大多数权益池运营者 (SPO) 同意的区块权重。然后，修改链选择规则，选择最重的链，而不是最长的链。

这篇博文反映了结算时间在区块链环境中，更具体地说在 Cardano 生态系统中的相关性，并描述了 Peras 是什么以及它是如何运作的。

## 卡尔达诺扩展

Cardano 生态系统的预期增长需要一系列扩容解决方案的实施。具体而言，我们正在开发 Ouroboros 协议的新版本，以增强 Layer 1 的性能。这些改进解决了现有扩容解决方案未涵盖的领域，对于支持 Cardano 不断扩展的网络至关重要。

我们在 Peras 上的工作也为 Input | Output 提供了建立和推动全新创新流程的机会，旨在通过模拟和快速原型设计，最大限度地缩短将研究想法付诸实践所需的时间。目标是什么？既要保持基础研究的稳健性和严谨性，又要兼顾区块链生态系统快速发展的步伐。得益于这一流程，我们在论文正式发表之前[就起草了一份详细的 CIP](https://github.com/cardano-scaling/CIPs/blob/peras/CIP-0140/README.lagda.md)（以及[AGDA规范）。](https://en.wikipedia.org/wiki/Agda_\(programming_language\))

### 现有的扩展解决方案：Hydra 和 Mithril

Hydra 是一个 Layer 2 扩容解决方案，旨在增强 Cardano 区块链。它允许一组参与者获取部分 Cardano 账本状态（Layer 1），在链下（Layer 2）进行处理，然后无缝地将其重新集成到主区块链（Layer 1）中。Hydra 的一个关键特性是链下使用的账本模型与主链上的账本模型完全相同，从而确保了某种“同构性”。结合链下处理，这一特性可实现高吞吐量、低延迟和成本效益，同时通过使用主区块链作为后备机制，确保强大的安全性。

Hydra 家族的首个协议是[Hydra 头部协议](https://iohk.io/en/blog/posts/2022/02/03/implementing-hydra-heads-the-first-step-towards-the-full-hydra-vision/)。Hydra 头部协议是多方状态通道的同构版本，这意味着所有参与节点对维护和演进链下状态承担同等责任。相比之下，目前处于早期研究阶段的 Hydra 尾部协议旨在将同构 Layer-2 解决方案的概念扩展到类似 Rollup 的协议。这些“非对称”协议涉及一台或多台服务器代表客户端在链下处理交易。

[Mithril](https://iohk.io/blog/posts/2021/10/29/mithril-a-stronger-and-lighter-blockchain-for-better-efficiency/)是一种基于权益的多重签名方案，它利用现有的 Cardano 网络提供全部或部分区块链状态的认证快照。Mithril 的主要应用是加快 Cardano 节点的引导速度。加入节点无需验证自创世区块以来发布的每个区块（这非常耗时），而是可以从认证快照开始。因此，这些快照对于应用程序、侧链或轻钱包之间的同步特别有用。

### 佩拉斯和莱奥斯

虽然 Hydra 能够在 Layer 2 上实现快速且高吞吐量的交易处理，但 Hydra 和 Mithril 都无法解决 Cardano 主网的吞吐量和延迟问题。这促成了 Ouroboros Peras（本博客的重点）和 Leios（Ouroboros 协议的新版本）的开发。Peras 旨在缩短结算时间，而 Leios 则专注于最大限度地利用可用的网络带宽。这些协议将共同提升用户体验，允许在区块链上更快地记录和结算更多交易。[在最近的一段视频中](https://www.youtube.com/watch?v=Czmg9WmSCcI)，Input | Output 的首席科学家 Aggelos Kiayias 描述了这套有望显著提升 Cardano 可扩展性的新技术。

![](https://ucarecdn.com/3a3fc8af-a177-46e5-9f61-d323b2834bf6/)

## 衔尾蛇和定居点

### 快速结算的重要性

“快速结算”是指随着时间的推移，交易被撤销的概率迅速下降。区块链的可用性与其结算交易的速度直接相关。例如，在使用区块链支付商品时，重要的是等待足够长的时间，直到支付交易结算完毕后再转移商品。对于像一杯咖啡这样的廉价商品，人们可能会接受更高的失败概率，以换取更短的等待时间。然而，对于像兰博基尼这样的高价值商品，人们应该等到支付被撤销的概率极低时再进行支付。在这两种情况下，撤销概率下降得越快，区块链支付就越方便实用。

快速结算的另一个关键用例是侧链桥接，它使用户能够将资金从主链转移到侧链。由于撤销与此类转移相关的交易可能会扰乱侧链的正常运行，因此务必等到撤销的可能性降至最低。因此，主链保证的结算速度越快，桥接就越高效、可靠。

总而言之，快速结算对于区块链的整体实用性和实用性至关重要。

### 卡尔达诺的结算是如何运作的？

Cardano 区块链由名为 Ouroboros 的协议驱动。在 Praos（Ouroboros 的当前版本）中，新区块以概率方式添加。在每个（时间）槽位中，SPO 参与抽签，以获得生成新区块的权利，中签的几率与其所代表的权益成正比。目前，Cardano 的协议参数规定大约每 20 个槽位创建一个新区块。这些新区块随后会根据最长链原则在网络中传播，并被其他节点采用。这意味着，当 SPO 收到一条包含新区块的扩展链时，当且仅当新链比其当前链更长时，它才会采用这条新链作为自己的链。

在 Cardano 中，如果出现一条更长的链，该链在该区块之前“分叉”，因此不包含当前属于最长链的区块，则可以“还原”该区块。例如，当多个 SPO 被选举同时创建区块时，就会发生这种分叉。然而，在实践中，由于在等长链之间进行选择的打破平局机制，同时出块产生的分叉通常是短暂的。更重要的问题是系统攻击（例如私链攻击）导致的长分叉。在这种攻击中，敌对节点（可能代表总权益的很大一部分）会构建一条秘密链，并且只有当公链赶上私链时才会发布它，从而导致长分叉。

至关重要的是，区块在最长链中的位置越深，被撤销的可能性就越小。使用 Praos，等待小概率撤销的时间可能从几分钟到几小时不等，具体取决于所需的安全级别和假定的对手实力。Peras 将显著缩短这一等待时间，如下所述。

### 最终性和结算之间的区别

_在区块链生态系统中，理解最终性_和_结算_之间的区别至关重要。基于拜占庭容错 (BFT) 计算的协议（例如 Algorand）支持的区块链实现了“最终性”，这意味着区块通常几乎可以立即确认，并且一旦确认，就永久成为链历史的一部分。这种最终性非常稳健，整个协议失效的可能性非常小。需要注意的是，这种失效将意味着协议永久失效。

相反，基于中本聪的协议，例如 Ouroboros，实现了“结算”。这意味着，随着更多区块在其上构建，一个区块保留在区块链历史中的可能性会增加。然而，从技术上讲，即使区块深度嵌入，也始终存在因链重组而导致区块被撤销的可能性，尽管这种可能性非常小。重要的是，与拜占庭容错 (BFT) 类型的协议不同，这种撤销并不被视为永久破坏协议的故障。

因此，拜占庭容错协议 (BFT) 提供即时且持久的确认，且总体错误概率较小，而中本聪协议则提供概率保证，这种保证会随着区块链的增长而变得更加稳健。概率结算还允许其他理想的特性，例如自我修复，这将在未来的博客文章中详细阐述。

### Peras 如何实现快速结算

Peras 的核心思想是通过一种机制来增强 Praos，即 SPO 隐式地表示支持其首选链末端稍靠后的区块。投票会增加链的权重（“基础”权重由链的区块赋予），而各方会选择他们认为权重最高的链作为其首选链。

在良好的情况下——网络性能良好且腐败程度较低——大多数投票可能会集中在一个区块上，并为包含此区块的任何链提供权重提升。然而，对于 Peras 的安全而言，每一轮投票中都达成足够的一致至关重要。也就是说，必须有一个区块获得超过一定阈值的选票，即所谓的法定人数。选择该阈值的方式是，最多只有一个区块可以达到法定人数，并且法定人数区块与任何其他区块之间存在显著的投票差距。如果没有法定人数，就无法保证投票差距，攻击者可能会利用投票层分裂诚实方，从而获得优势。

因此，在一轮投票失败后，Peras 会进入冷却期，在此期间投票暂停，协议本质上以 Praos 的方式进行。冷却期必须足够长，以确保在失败轮次中因投票分配不均而产生的任何对抗优势都能在冷却期结束时被抵消。

投票带来的提升和冷却时间的长短之间存在权衡。提升越高，投票失败的潜在损害就越大，因此恢复投票所需的时间也就越长。

实践证明，Cardano 网络性能卓越，即使在物理故障下也拥有令人印象深刻的弹性。此外，在任何给定时间，几乎 100% 的委托权益都处于在线状态。据我们所知，自 Shelley 时代开始以来，尚未报告任何涉及大量权益的针对 Praos 的攻击，这表明绝大多数 SPO 都遵循该协议。在合理假设这些条件持续存在的情况下，我们可以预测 Peras 将持续享受快速结算，而无需冷却时间。

## 基于证据的开源工程

Peras 的开发和实施符合 IO 基于证据和研究的开源工程方法。

Cardano 的每项新技术进步都始于一系列想法和研究论文。后续的开发和想法成熟过程包含不同的阶段。

假设的思想通过算法和证明形式化地阐述。定理证明有助于证明关键的安全属性，例如链增长和公共前缀，同时也为基于更形式化方法的研究和验证奠定了基础。

所有这些组件都通过 Haskell 的原型实现进行测试，然后创建实时模拟和技术模型来分析整个网络的行为。模拟使 IO 和社区能够可视化和模拟协议的动态特性。结果数据将被收集、分析，并通过定期更新和报告提供给社区。

这些过程的最终目标，以及 Ouroboros 协议系列的不断发展，是通过区块链技术解决现实世界的问题。

### 开源

同时，开源设计使软件创建者能够从一开始就加速开发，利用专家社区来扩展知识和范围，并使用经过充分测试和同行评审的代码。

所有这些都转化为一系列好处，可分为以下几类：

**更快的创新和增长**

开源意味着构建和开发软件项目所需的基础模块已经存在，随时可用，这大大缩短了启动时间。创建者可以直接获取代码并将其用于他们的项目。基于开源的开发可以快速创新和发展。

**更快、更安全、更透明的开发**

任何新加入现有开源项目的人，都能确保其代码已经过众多其他人的全面测试和验证。这种保证，加上开源固有的透明性，支持快速安全的开发。

**基于社区的支持与合作**

强大、广泛且活跃的社区支持更好的软件质量和更一致的发布。

在这样的环境中，新想法传播得更快，如果出现任何问题或错误，社区都会努力解决。围绕软件项目构建的强大社区能够营造一种联系感，并激发人们朝着共同目标努力的本能。参与其中的社区成员往往会互相支持，并分享新的用例建议。

## 如何参与

**Peras 的开发进展迅速**。这意味着核心理念和算法已经确立，正式的规范和原型正在开发和测试中。在 Peras 被考虑部署到 Cardano 主网之前，仍有许多工作要做。然而，Peras 已经成为一种全新开发方法的一部分，该方法旨在通过由 Input | Output 率先采用的快速原型设计方法，最大限度地缩短基础研究与最终部署之间的时间。因此，在研究论文发布之前，协议更新已首次以 CIP 的形式起草。

Peras 的演进将由 Cardano 社区共同努力完成，Intersect 的各个委员会和工作组正在积极讨论。我们鼓励开发人员、研究人员和爱好者探索上述资源，参与 Discord 服务器上的讨论，并为项目贡献他们的专业知识。

如果您有兴趣参与 Peras 项目，请使用以下资源：

- [Peras 文档网站](https://peras.cardano-scaling.org/)
- [P﻿eras 草案 CIP](https://github.com/cardano-scaling/CIPs/blob/peras/CIP-0140/README.lagda.md)
- [Peras 代码存储库](https://github.com/input-output-hk/peras-design)
- [Discord 服务器](https://discord.gg/aX4mhxqAuR)